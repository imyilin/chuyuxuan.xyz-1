<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Http协议那些事儿 | Chuyuxuan</title><meta name="description" content="Http协议那些事儿"><meta name="keywords" content="计算机网络,Http"><meta name="author" content="Chuyuxuan"><meta name="copyright" content="Chuyuxuan"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon2.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://hm.baidu.com"><link rel="preconnect" href="http://ta.qq.com"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Http协议那些事儿"><meta name="twitter:description" content="Http协议那些事儿"><meta name="twitter:image" content="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/cover.png"><meta property="og:type" content="article"><meta property="og:title" content="Http协议那些事儿"><meta property="og:url" content="https://chuyuxuan.xyz/2020/03/09/%E2%96%B6%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%BA%94%E7%94%A8%E5%B1%82/http%E5%8D%8F%E8%AE%AE%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/"><meta property="og:site_name" content="Chuyuxuan"><meta property="og:description" content="Http协议那些事儿"><meta property="og:image" content="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/cover.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://chuyuxuan.xyz/2020/03/09/%E2%96%B6%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%BA%94%E7%94%A8%E5%B1%82/http%E5%8D%8F%E8%AE%AE%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/"><link rel="prev" title="CSS背景定位与背景关联" href="https://chuyuxuan.xyz/2020/03/11/%E2%96%B6%E5%89%8D%E7%AB%AF/CSS/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/CCS%E8%83%8C%E6%99%AF%E5%AE%9A%E4%BD%8D%E4%B8%8E%E5%85%B3%E8%81%94/"><link rel="next" title="Window下照片快速批量命名" href="https://chuyuxuan.xyz/2020/03/05/%E2%96%B6%E5%B0%8F%E6%8A%80%E8%83%BD/%E7%94%B5%E8%84%91%E5%B0%8F%E6%8A%80%E5%B7%A7/window%E4%B8%8B%E5%BF%AB%E9%80%9F%E5%91%BD%E5%90%8D/"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6af004bb354c28578bb066736f9d6ce5";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script src="http://tajs.qq.com/stats?sId=66514140" charset="UTF-8"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"languages":{"author":"作者: Chuyuxuan","link":"链接: https://chuyuxuan.xyz/2020/03/09/%E2%96%B6%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%BA%94%E7%94%A8%E5%B1%82/http%E5%8D%8F%E8%AE%AE%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/","source":"来源: Chuyuxuan","info":"著作权归源作者所有，转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: true,
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#FFC1C1","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Chuyuxuan" type="application/atom+xml">
</head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Chuyuxuan</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/wuhan/"><i class="fa-fw fa fa-plus-circle"></i><span> 疫情相关</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于&amp;留言</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 更多</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 视频</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-file-image-o"></i><span> 图片</span></a></li></ul></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">47</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">60</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">9</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/wuhan/"><i class="fa-fw fa fa-plus-circle"></i><span> 疫情相关</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于&amp;留言</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 更多</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 视频</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-file-image-o"></i><span> 图片</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#01-http-基本概念"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text"> 01 HTTP 基本概念</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#02-http-常见的状态码"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text"> 02 HTTP 常见的状态码</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1xx"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text"> 1xx</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2xx"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text"> 2xx</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3xx"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text"> 3xx</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4xx"><span class="toc_mobile_items-number">2.4.</span> <span class="toc_mobile_items-text"> 4xx</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5xx"><span class="toc_mobile_items-number">2.5.</span> <span class="toc_mobile_items-text"> 5xx</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#03-http-常见字段"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text"> 03 HTTP 常见字段</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-host字段"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text"> 1. Host字段</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2content-length-字段"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text"> 2.Content-Length 字段</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3connection-字段"><span class="toc_mobile_items-number">3.3.</span> <span class="toc_mobile_items-text"> 3.Connection 字段</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4content-type-字段"><span class="toc_mobile_items-number">3.4.</span> <span class="toc_mobile_items-text"> 4.Content-Type 字段</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5content-encoding-字段"><span class="toc_mobile_items-number">3.5.</span> <span class="toc_mobile_items-text"> 5.Content-Encoding 字段</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#05-get-与-post"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text"> 05 GET 与 POST</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#get-和-post-的区别"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text"> GET 和 POST 的区别</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#get-和-post-的安全和幂等"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text"> GET 和 POST 的安全和幂等</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#安全和幂等"><span class="toc_mobile_items-number">4.2.1.</span> <span class="toc_mobile_items-text"> 安全和幂等：</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#06-http-特性"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text"> 06 HTTP 特性</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#优点"><span class="toc_mobile_items-number">5.1.</span> <span class="toc_mobile_items-text"> 优点</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-简单"><span class="toc_mobile_items-number">5.1.1.</span> <span class="toc_mobile_items-text"> 1. 简单</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-灵活和易于扩展"><span class="toc_mobile_items-number">5.1.2.</span> <span class="toc_mobile_items-text"> 2. 灵活和易于扩展</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-应用广泛和跨平台"><span class="toc_mobile_items-number">5.1.3.</span> <span class="toc_mobile_items-text"> 3. 应用广泛和跨平台</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#缺点"><span class="toc_mobile_items-number">5.2.</span> <span class="toc_mobile_items-text"> 缺点</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-无状态双刃剑"><span class="toc_mobile_items-number">5.2.1.</span> <span class="toc_mobile_items-text"> 1. 无状态双刃剑</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-明文传输双刃剑"><span class="toc_mobile_items-number">5.2.2.</span> <span class="toc_mobile_items-text"> 2. 明文传输双刃剑</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-不安全"><span class="toc_mobile_items-number">5.2.3.</span> <span class="toc_mobile_items-text"> 3. 不安全</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#07-http-性能消耗"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text"> 07 HTTP 性能消耗</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-长连接"><span class="toc_mobile_items-number">6.1.</span> <span class="toc_mobile_items-text"> 1. 长连接</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-管道网络传输"><span class="toc_mobile_items-number">6.2.</span> <span class="toc_mobile_items-text"> 2. 管道网络传输</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-队头阻塞"><span class="toc_mobile_items-number">6.3.</span> <span class="toc_mobile_items-text"> 3. 队头阻塞</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#08-http-与-https"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text"> 08 HTTP 与 HTTPS</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#https-vs-http"><span class="toc_mobile_items-number">7.1.</span> <span class="toc_mobile_items-text"> HTTPS －－VS－－ HTTP</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#http-三个风险"><span class="toc_mobile_items-number">7.1.1.</span> <span class="toc_mobile_items-text"> HTTP 三个风险：</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#https-三个优点"><span class="toc_mobile_items-number">7.1.2.</span> <span class="toc_mobile_items-text"> HTTPS　三个优点：</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#https-解决-http"><span class="toc_mobile_items-number">7.1.3.</span> <span class="toc_mobile_items-text"> HTTPS 解决 HTTP</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-混合加密"><span class="toc_mobile_items-number">7.1.3.1.</span> <span class="toc_mobile_items-text"> 1. 混合加密</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-摘要算法"><span class="toc_mobile_items-number">7.1.3.2.</span> <span class="toc_mobile_items-text"> 2. 摘要算法</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-数字证书"><span class="toc_mobile_items-number">7.1.4.</span> <span class="toc_mobile_items-text"> 3. 数字证书</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#09-https-的连接交互"><span class="toc_mobile_items-number">8.</span> <span class="toc_mobile_items-text"> 09 HTTPS  的连接交互</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ssltls-协议基本流程"><span class="toc_mobile_items-number">8.1.</span> <span class="toc_mobile_items-text"> SSL&#x2F;TLS 协议基本流程：</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ssltls-协议建立的详细流程"><span class="toc_mobile_items-number">8.2.</span> <span class="toc_mobile_items-text"> SSL&#x2F;TLS 协议建立的详细流程：</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-clienthello"><span class="toc_mobile_items-number">8.2.1.</span> <span class="toc_mobile_items-text"> 1. ClientHello</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-severhello"><span class="toc_mobile_items-number">8.2.2.</span> <span class="toc_mobile_items-text"> 2. SeverHello</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3客户端回应"><span class="toc_mobile_items-number">8.2.3.</span> <span class="toc_mobile_items-text"> 3.客户端回应</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-服务器的最后回应"><span class="toc_mobile_items-number">8.2.4.</span> <span class="toc_mobile_items-text"> 4. 服务器的最后回应</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#10-http11-http2-http3-演变"><span class="toc_mobile_items-number">9.</span> <span class="toc_mobile_items-text"> 10 HTTP&#x2F;1.1、HTTP&#x2F;2、HTTP&#x2F;3 演变</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#http11-相比-http10-性能上的改进"><span class="toc_mobile_items-number">9.1.</span> <span class="toc_mobile_items-text"> HTTP&#x2F;1.1 相比 HTTP&#x2F;1.0 性能上的改进：</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#http2-相比-http11-性能上的改进"><span class="toc_mobile_items-number">9.2.</span> <span class="toc_mobile_items-text"> HTTP&#x2F;2 相比 HTTP&#x2F;1.1 性能上的改进</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-头部压缩"><span class="toc_mobile_items-number">9.2.1.</span> <span class="toc_mobile_items-text"> 1. 头部压缩</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-二进制格式"><span class="toc_mobile_items-number">9.2.2.</span> <span class="toc_mobile_items-text"> 2. 二进制格式</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-数据流"><span class="toc_mobile_items-number">9.2.3.</span> <span class="toc_mobile_items-text"> 3. 数据流</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-多路复用"><span class="toc_mobile_items-number">9.2.4.</span> <span class="toc_mobile_items-text"> 4. 多路复用</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-服务器推送"><span class="toc_mobile_items-number">9.2.5.</span> <span class="toc_mobile_items-text"> 5. 服务器推送</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#http3-相比-http2-性能上的改进"><span class="toc_mobile_items-number">9.3.</span> <span class="toc_mobile_items-text"> HTTP&#x2F;3 相比 HTTP&#x2F;2 性能上的改进</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#参考文献"><span class="toc_mobile_items-number">9.4.</span> <span class="toc_mobile_items-text"> 参考文献:</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#01-http-基本概念"><span class="toc-number">1.</span> <span class="toc-text"> 01 HTTP 基本概念</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#02-http-常见的状态码"><span class="toc-number">2.</span> <span class="toc-text"> 02 HTTP 常见的状态码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1xx"><span class="toc-number">2.1.</span> <span class="toc-text"> 1xx</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2xx"><span class="toc-number">2.2.</span> <span class="toc-text"> 2xx</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3xx"><span class="toc-number">2.3.</span> <span class="toc-text"> 3xx</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4xx"><span class="toc-number">2.4.</span> <span class="toc-text"> 4xx</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5xx"><span class="toc-number">2.5.</span> <span class="toc-text"> 5xx</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#03-http-常见字段"><span class="toc-number">3.</span> <span class="toc-text"> 03 HTTP 常见字段</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-host字段"><span class="toc-number">3.1.</span> <span class="toc-text"> 1. Host字段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2content-length-字段"><span class="toc-number">3.2.</span> <span class="toc-text"> 2.Content-Length 字段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3connection-字段"><span class="toc-number">3.3.</span> <span class="toc-text"> 3.Connection 字段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4content-type-字段"><span class="toc-number">3.4.</span> <span class="toc-text"> 4.Content-Type 字段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5content-encoding-字段"><span class="toc-number">3.5.</span> <span class="toc-text"> 5.Content-Encoding 字段</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#05-get-与-post"><span class="toc-number">4.</span> <span class="toc-text"> 05 GET 与 POST</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#get-和-post-的区别"><span class="toc-number">4.1.</span> <span class="toc-text"> GET 和 POST 的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#get-和-post-的安全和幂等"><span class="toc-number">4.2.</span> <span class="toc-text"> GET 和 POST 的安全和幂等</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#安全和幂等"><span class="toc-number">4.2.1.</span> <span class="toc-text"> 安全和幂等：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#06-http-特性"><span class="toc-number">5.</span> <span class="toc-text"> 06 HTTP 特性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#优点"><span class="toc-number">5.1.</span> <span class="toc-text"> 优点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-简单"><span class="toc-number">5.1.1.</span> <span class="toc-text"> 1. 简单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-灵活和易于扩展"><span class="toc-number">5.1.2.</span> <span class="toc-text"> 2. 灵活和易于扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-应用广泛和跨平台"><span class="toc-number">5.1.3.</span> <span class="toc-text"> 3. 应用广泛和跨平台</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#缺点"><span class="toc-number">5.2.</span> <span class="toc-text"> 缺点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-无状态双刃剑"><span class="toc-number">5.2.1.</span> <span class="toc-text"> 1. 无状态双刃剑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-明文传输双刃剑"><span class="toc-number">5.2.2.</span> <span class="toc-text"> 2. 明文传输双刃剑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-不安全"><span class="toc-number">5.2.3.</span> <span class="toc-text"> 3. 不安全</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#07-http-性能消耗"><span class="toc-number">6.</span> <span class="toc-text"> 07 HTTP 性能消耗</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-长连接"><span class="toc-number">6.1.</span> <span class="toc-text"> 1. 长连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-管道网络传输"><span class="toc-number">6.2.</span> <span class="toc-text"> 2. 管道网络传输</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-队头阻塞"><span class="toc-number">6.3.</span> <span class="toc-text"> 3. 队头阻塞</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#08-http-与-https"><span class="toc-number">7.</span> <span class="toc-text"> 08 HTTP 与 HTTPS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#https-vs-http"><span class="toc-number">7.1.</span> <span class="toc-text"> HTTPS －－VS－－ HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#http-三个风险"><span class="toc-number">7.1.1.</span> <span class="toc-text"> HTTP 三个风险：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#https-三个优点"><span class="toc-number">7.1.2.</span> <span class="toc-text"> HTTPS　三个优点：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#https-解决-http"><span class="toc-number">7.1.3.</span> <span class="toc-text"> HTTPS 解决 HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-混合加密"><span class="toc-number">7.1.3.1.</span> <span class="toc-text"> 1. 混合加密</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-摘要算法"><span class="toc-number">7.1.3.2.</span> <span class="toc-text"> 2. 摘要算法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-数字证书"><span class="toc-number">7.1.4.</span> <span class="toc-text"> 3. 数字证书</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#09-https-的连接交互"><span class="toc-number">8.</span> <span class="toc-text"> 09 HTTPS  的连接交互</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ssltls-协议基本流程"><span class="toc-number">8.1.</span> <span class="toc-text"> SSL&#x2F;TLS 协议基本流程：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ssltls-协议建立的详细流程"><span class="toc-number">8.2.</span> <span class="toc-text"> SSL&#x2F;TLS 协议建立的详细流程：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-clienthello"><span class="toc-number">8.2.1.</span> <span class="toc-text"> 1. ClientHello</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-severhello"><span class="toc-number">8.2.2.</span> <span class="toc-text"> 2. SeverHello</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3客户端回应"><span class="toc-number">8.2.3.</span> <span class="toc-text"> 3.客户端回应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-服务器的最后回应"><span class="toc-number">8.2.4.</span> <span class="toc-text"> 4. 服务器的最后回应</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-http11-http2-http3-演变"><span class="toc-number">9.</span> <span class="toc-text"> 10 HTTP&#x2F;1.1、HTTP&#x2F;2、HTTP&#x2F;3 演变</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#http11-相比-http10-性能上的改进"><span class="toc-number">9.1.</span> <span class="toc-text"> HTTP&#x2F;1.1 相比 HTTP&#x2F;1.0 性能上的改进：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#http2-相比-http11-性能上的改进"><span class="toc-number">9.2.</span> <span class="toc-text"> HTTP&#x2F;2 相比 HTTP&#x2F;1.1 性能上的改进</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-头部压缩"><span class="toc-number">9.2.1.</span> <span class="toc-text"> 1. 头部压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-二进制格式"><span class="toc-number">9.2.2.</span> <span class="toc-text"> 2. 二进制格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-数据流"><span class="toc-number">9.2.3.</span> <span class="toc-text"> 3. 数据流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-多路复用"><span class="toc-number">9.2.4.</span> <span class="toc-text"> 4. 多路复用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-服务器推送"><span class="toc-number">9.2.5.</span> <span class="toc-text"> 5. 服务器推送</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#http3-相比-http2-性能上的改进"><span class="toc-number">9.3.</span> <span class="toc-text"> HTTP&#x2F;3 相比 HTTP&#x2F;2 性能上的改进</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考文献"><span class="toc-number">9.4.</span> <span class="toc-text"> 参考文献:</span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/cover.png)"><div id="post-info"><div id="post-title"><div class="posttitle">Http协议那些事儿</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2020-03-09<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2020-04-13</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E2%96%B6%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">▶计算机网络</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>评论数:</span><a href="/2020/03/09/%E2%96%B6%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%BA%94%E7%94%A8%E5%B1%82/http%E5%8D%8F%E8%AE%AE%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/03/09/%E2%96%B6%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%BA%94%E7%94%A8%E5%B1%82/http%E5%8D%8F%E8%AE%AE%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css"><p><font size="1">来源于<a href="https://mp.weixin.qq.com/s/FJGKObVnU61ve_ioejLrtw" target="_blank" rel="noopener">codesheep</a>,稍微对其美化和排版。<br>
</font></p>
<div class="note danger">
            <h1 id="01-http-基本概念"><a class="markdownIt-Anchor" href="#01-http-基本概念"></a> 01 HTTP 基本概念</h1>
          </div>
<p>HTTP 是超文本传输协议，是超文本传输协议，也就是 <strong>H</strong> yperText  <strong>T</strong> ransfer  <strong>P</strong> rotocol。HTTP的名字「<code>超文本协议传输</code>」，它可以拆成三个部分：</p>
<pre><code>    超文本

    传输

    协议
</code></pre>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http1.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="三个部分" class="fancybox"><img alt="三个部分" title="三个部分" data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http1.png" class="lazyload"></a></p>
<p>说白了，<strong>HTTP 是一个在计算机世界里专门在<code>「两点」</code>之间<code>「传输」</code>文字、图片、音频、视频等<code>「超文本」</code>数据的<code>「约定和规范」</code>。</strong></p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http12.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="请求 - 应答" class="fancybox"><img alt="请求 - 应答" title="请求 - 应答" data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http12.png" class="lazyload"></a></p>
 <div class="note success">
            <h1 id="02-http-常见的状态码"><a class="markdownIt-Anchor" href="#02-http-常见的状态码"></a> 02 HTTP 常见的状态码</h1>
          </div>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http19.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http19.png" class="lazyload"></a></p>
<h2 id="1xx"><a class="markdownIt-Anchor" href="#1xx"></a> 1xx</h2>
<p><code>1xx</code> 类状态码属于提示信息，是协议处理中的一种中间状态，实际用到的比较少。</p>
<h2 id="2xx"><a class="markdownIt-Anchor" href="#2xx"></a> 2xx</h2>
<p><code>2xx</code> 类状态码表示服务器成功处理了客户端的请求，也是我们最愿意看到的状态。</p>
<ul>
<li>
<p>「<em>200 OK</em>」是最常见的成功状态码，表示一切正常。如果是非 HEAD 请求，服务器返回的响应头都会有 body 数据。</p>
</li>
<li>
<p>「<em>204 No Content</em>」也是常见的成功状态码，与 200 OK 基本相同，但响应头没有 body 数据。</p>
</li>
<li>
<p>「<em>206 Partial Content</em>」是应用于 HTTP 分块下载或断电续传，表示响应返回的 body 数据并不是资源的全部，而是其中的一部分，也是服务器处理成功的状态。</p>
</li>
</ul>
<h2 id="3xx"><a class="markdownIt-Anchor" href="#3xx"></a> 3xx</h2>
<p><code>3xx</code> 类状态码表示客户端请求的资源发送了变动，需要客户端用新的 URL 重新发送请求获取资源，也就是重定向。</p>
<ul>
<li>
<p>「<em>301 Moved Permanently</em>」表示永久重定向，说明请求的资源已经不存在了，需改用新的 URL 再次访问。</p>
</li>
<li>
<p>「<em>302 Found</em>」表示临时重定向，说明请求的资源还在，但暂时需要用另一个 URL 来访问。301 和 302 都会在响应头里使用字段 Location，指明后续要跳转的 URL，浏览器会自动重定向新的 URL。</p>
</li>
<li>
<p>「<em>304 Not Modified</em>」不具有跳转的含义，表示资源未修改，重定向已存在的缓冲文件，也称缓存重定向，用于缓存控制。</p>
</li>
</ul>
<h2 id="4xx"><a class="markdownIt-Anchor" href="#4xx"></a> 4xx</h2>
<p><code>4xx</code>类状态码表示客户端发送的报文有误，服务器无法处理，也就是错误码的含义。</p>
<ul>
<li>
<p>「<em>400 Bad Request</em>」表示客户端请求的报文有错误，但只是个笼统的错误。</p>
</li>
<li>
<p>「<em>403 Forbidden</em>」表示服务器禁止访问资源，并不是客户端的请求出错。</p>
</li>
<li>
<p>「<em>404 Not Found</em>」表示请求的资源在服务器上不存在或未找到，所以无法提供给客户端。</p>
</li>
</ul>
<h2 id="5xx"><a class="markdownIt-Anchor" href="#5xx"></a> 5xx</h2>
<p><code>5xx</code> 类状态码表示客户端请求报文正确，但是服务器处理时内部发生了错误，属于服务器端的错误码。</p>
<ul>
<li>
<p>「<em>500 Internal Server Error</em>」与 400 类型，是个笼统通用的错误码，服务器发生了什么错误，我们并不知道。</p>
</li>
<li>
<p>「<em>501 Not Implemented</em>」表示客户端请求的功能还不支持，类似“即将开业，敬请期待”的意思。</p>
</li>
<li>
<p>「<em>502 Bad Gateway</em>」通常是服务器作为网关或代理时返回的错误码，表示服务器自身工作正常，访问后端服务器发生了错误。</p>
</li>
<li>
<p>「<em>503 Service Unavailable</em>」表示服务器当前很忙，暂时无法响应服务器，类似“网络服务正忙，请稍后重试”的意思。</p>
</li>
</ul>
<div class="note success">
            <h1 id="03-http-常见字段"><a class="markdownIt-Anchor" href="#03-http-常见字段"></a> 03 HTTP 常见字段</h1>
          </div>
<h2 id="1-host字段"><a class="markdownIt-Anchor" href="#1-host字段"></a> 1. <em>Host字段</em></h2>
<p>客户端发送请求时，用来指定服务器的域名。</p>
<pre><code>    Host: www.A.com
</code></pre>
<p>有了 Host 字段，就可以将请求发往「同一台」服务器上的不同网站。<br>
<a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http20.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http20.png" class="lazyload"></a></p>
<h2 id="2content-length-字段"><a class="markdownIt-Anchor" href="#2content-length-字段"></a> 2.<em>Content-Length 字段</em></h2>
<p>服务器在返回数据时，会有<code>Content-Length</code> 字段，表明本次回应的数据长度。</p>
<pre><code>    Content-Length: 1000
</code></pre>
<p>如上面则是告诉浏览器，本次服务器回应的数据长度是 1000 个字节，后面的字节就属于下一个回应了。<br>
<a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http21.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http21.png" class="lazyload"></a></p>
<h2 id="3connection-字段"><a class="markdownIt-Anchor" href="#3connection-字段"></a> 3.<em>Connection 字段</em></h2>
<p><code>Connection</code>字段最常用于客户端要求服务器使用 TCP 持久连接，以便其他请求复用。HTTP/1.1 版本的默认连接都是持久连接，但为了兼容老版本的 HTTP，需要指定 Connection 首部字段的值为 <code>Keep-Alive</code>。</p>
<pre><code>    Connection: keep-alive
</code></pre>
<p>一个可以复用的 TCP 连接就建立了，直到客户端或服务器主动关闭连接。但是，这b并不是标准字段。</p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http22.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http22.png" class="lazyload"></a></p>
<h2 id="4content-type-字段"><a class="markdownIt-Anchor" href="#4content-type-字段"></a> 4.<em>Content-Type 字段</em></h2>
<p><code>Content-Type</code>字段用于服务器回应时，告诉客户端，本次数据是什么格式。</p>
<pre><code>    Content-Type: text/html; charset=utf-8
</code></pre>
<p>上面的类型表明，发送的是网页，而且编码是UTF-8。客户端请求的时候，可以使用 Accept 字段声明自己可以接受哪些数据格式。</p>
<pre><code>    Accept: */*
</code></pre>
<p>上面代码中，客户端声明自己可以接受任何格式的数据。<br>
<a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http23.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http23.png" class="lazyload"></a></p>
<h2 id="5content-encoding-字段"><a class="markdownIt-Anchor" href="#5content-encoding-字段"></a> 5.<em>Content-Encoding 字段</em></h2>
<p><code>Content-Encoding</code>字段说明数据的压缩方法。表示服务器返回的数据使用了什么压缩格式</p>
<pre><code>    Content-Encoding: gzip
</code></pre>
<p>上面表示服务器返回的数据采用了 gzip 方式压缩，告知客户端需要用此方式解压。<br>
客户端在请求时，用 Accept-Encoding 字段说明自己可以接受哪些压缩方法。</p>
<pre><code>    Accept-Encoding: gzip, deflate
</code></pre>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http24.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http24.png" class="lazyload"></a></p>
<div class="note success">
            <h1 id="05-get-与-post"><a class="markdownIt-Anchor" href="#05-get-与-post"></a> 05 GET 与 POST</h1>
          </div>
<h2 id="get-和-post-的区别"><a class="markdownIt-Anchor" href="#get-和-post-的区别"></a> GET 和 POST 的区别</h2>
<p><code>Get</code> 方法的含义是请求 <strong>从服务器获取资源</strong> ，这个资源可以是静态的文本、页面、图片视频等。比如，你打开我的文章，浏览器就会发送 GET 请求给服务器，服务器就会返回文章的所有文字及资源。<br>
<a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http25.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http25.png" class="lazyload"></a></p>
<p>而 <code>POST</code>方法则是相反操作，它向<code>URI</code> 指定的资源提交数据，数据就放在<code>报文</code>的 <code>body</code>里。</p>
<p>比如，你在我文章底部，敲入了留言后点击「提交」（ <strong>暗示你们留言</strong> ），浏览器就会执行一次 POST 请求，把你的留言文字放进了报文 body 里，然后拼接好 POST 请求头，通过 TCP 协议发送给服务器。<br>
<a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http2.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http2.png" class="lazyload"></a></p>
<h2 id="get-和-post-的安全和幂等"><a class="markdownIt-Anchor" href="#get-和-post-的安全和幂等"></a> GET 和 POST 的安全和幂等</h2>
<p><font size="1">--------chuyuxuan: 讲真，我头一次听说<code>安全和幂等</code><br>
</font></p>
<h3 id="安全和幂等"><a class="markdownIt-Anchor" href="#安全和幂等"></a> 安全和幂等：</h3>
<ul>
<li>在<code>HTTP</code>协议里，所谓的「<code>安全</code>」是指请求方法不会「<code>破坏</code>」服务器上的资源。</li>
<li>所谓的「<code>幂等</code>」，意思是多次执行相同的操作，结果都是「<code>相同</code>」的。</li>
</ul>
<p>那么很明显 :</p>
<ul>
<li>
<p><strong>GET 方法就是安全且幂等的</strong> ，因为它是「只读」操作，无论操作多少次，服务器上的数据都是安全的，且每次的结果都是相同的。</p>
</li>
<li>
<p><strong>POST</strong>  因为是「<code>新增或提交数据</code>」的操作，会修改服务器上的资源，所以是 <strong>不安全</strong> 的，且多次提交数据就会创建多个资源，所以 <strong>不是幂等</strong> 的。</p>
</li>
</ul>
<div class="note success">
            <h1 id="06-http-特性"><a class="markdownIt-Anchor" href="#06-http-特性"></a> 06 HTTP 特性</h1>
          </div>
<h2 id="优点"><a class="markdownIt-Anchor" href="#优点"></a> 优点</h2>
<p>HTTP 最凸出的优点是「简单、灵活和易于扩展、应用广泛和跨平台」。</p>
<p><font size="1">-------chuyuxuan: 怪不得有人说以后<code>BS(browser clinet)架构</code>要广泛于<code>CS 架构</code>.<br>
</font></p>
<h3 id="1-简单"><a class="markdownIt-Anchor" href="#1-简单"></a> <em>1. 简单</em></h3>
<p>HTTP 基本的报文格式就是<code>header + body</code>，头部信息也是 key-value 简单文本的形式， <strong>易于理解</strong> ，降低了学习和使用的门槛。</p>
<h3 id="2-灵活和易于扩展"><a class="markdownIt-Anchor" href="#2-灵活和易于扩展"></a> <em>2. 灵活和易于扩展</em></h3>
<p>HTTP协议里的各类请求方法、URI/URL、状态码、头字段等每个组成要求都没有被固定死，都允许开发人员 <strong>自定义和扩充</strong> 。</p>
<p>同时 HTTP 由于是工作在应用层（ OSI 第七层），则它 <strong>下层可以随意变化</strong> 。</p>
<p>HTTPS 也就是在 HTTP 与 TCP 层之间增加了 SSL/TLS 安全传输层，HTTP/3 甚至把 TCPP 层换成了基于 UDP 的 QUIC。</p>
<h3 id="3-应用广泛和跨平台"><a class="markdownIt-Anchor" href="#3-应用广泛和跨平台"></a> <em>3. 应用广泛和跨平台</em></h3>
<p>互联网发展至今，HTTP 的应用范围非常的广泛，从台式机的浏览器到手机上的各种 APP，从看新闻、刷贴吧到购物、理财、吃鸡，HTTP 的应用 <strong>片地开花</strong> ，同时天然具有 <strong>跨平台</strong> 的优越性。</p>
<h2 id="缺点"><a class="markdownIt-Anchor" href="#缺点"></a> 缺点</h2>
<p>HTTP 协议里有优缺点一体的 <strong>双刃剑</strong> ，分别是「<code>无状态、明文传输</code>」，同时还有一大缺点「<code>不安全</code>」。</p>
<h3 id="1-无状态双刃剑"><a class="markdownIt-Anchor" href="#1-无状态双刃剑"></a> <em>1. 无状态双刃剑</em></h3>
<p>无状态的 <strong>好处</strong> ，因为服务器不会去记忆 HTTP 的状态，所以不需要额外的资源来记录状态信息，这能减轻服务器的负担，能够把更多的 CPU 和内存用来对外提供服务。</p>
<p>无状态的 <strong>坏处</strong> ，既然服务器没有记忆能力，它在完成有关联性的操作时会非常麻烦。</p>
<p>例如:<code>登录;添加购物车;下单;结算;支付</code>，这系列操作都要知道用户的身份才行。但服务器不知道这些请求是有关联的，每次都要问一遍身份信息。<br>
这样每操作一次，都要验证信息，这样的购物体验还能愉快吗？</p>
<p>对于无状态的问题，解法方案有很多种，其中比较简单的方式用  <strong>Cookie</strong>  技术。</p>
<p><code>Cookie</code> 通过在请求和响应报文中写入 <code>Cookie</code> 信息来控制客户端的状态。</p>
<p>相当于， <strong>在客户端第一次请求后，服务器会下发一个装有客户信息的「小贴纸」，后续客户端请求服务器的时候，带上「小贴纸」，服务器就能认得了了</strong> .</p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http3.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http3.png" class="lazyload"></a></p>
<h3 id="2-明文传输双刃剑"><a class="markdownIt-Anchor" href="#2-明文传输双刃剑"></a> <em>2. 明文传输双刃剑</em></h3>
<p>明文意味着在传输过程中的信息，是可方便阅读的，通过浏览器的 F12 控制台或<code>Wireshark</code> 抓包都可以直接肉眼查看，为我们调试工作带了极大的便利性。</p>
<p>但是这正是这样，HTTP 的所有信息都暴露在了光天化日下，相当于 <strong>信息裸奔</strong> 。在传输的漫长的过程中，信息的内容都毫无隐私可言，很容易就能被窃取，如果里面有你的账号密码信息，那 <strong>你号没了</strong> 。</p>
<h3 id="3-不安全"><a class="markdownIt-Anchor" href="#3-不安全"></a> <em>3. 不安全</em></h3>
<p><strong>HTTP 比较严重的缺点就是不安全：</strong></p>
<ul>
<li>通信使用明文（不加密），内容可能会被窃听。比如， <strong>账号信息容易泄漏，那你号没了。</strong></li>
<li>不验证通信方的身份，因此有可能遭遇伪装。比如， <strong>访问假的淘宝、拼多多，那你钱没了。</strong></li>
<li>无法证明报文的完整性，所以有可能已遭篡改。比如， <strong>网页上植入垃圾广告，视觉污染，眼没了。</strong></li>
</ul>
<p>HTTP 的安全问题，可以用<code>HTTPS</code>的方式解决，也就是通过引入<code>SSL/TLS</code> 层，使得在安全上达到了极致。</p>
<p><font size="1">-------chuyuxuan: 比方说我的博客就是采用https加密的.<br>
</font></p>
<div class="note success">
            <h1 id="07-http-性能消耗"><a class="markdownIt-Anchor" href="#07-http-性能消耗"></a> 07 HTTP 性能消耗</h1>
          </div>
<p>HTTP 协议是基于  <strong>TCP/IP</strong> ，并且使用了「 <strong>请求 - 应答</strong> 」的通信模式，所以性能的关键就在这 <strong>两点</strong> 里。</p>
<h2 id="1-长连接"><a class="markdownIt-Anchor" href="#1-长连接"></a> <em>1. 长连接</em></h2>
<p>早期 HTTP/1.0 性能上的一个很大的问题，那就是每发起一个请求，都要新建一次 TCP 连接（三次握手），而且是串行请求，做了无畏的 TCP 连接建立和断开，增加了通信开销。</p>
<p>为了解决上述 TCP 连接问题，HTTP/1.1 提出了 <strong>长连接</strong> 的通信方式，也叫持久连接。这种方式的好处在于减少了 TCP 连接的重复建立和断开所造成的额外开销，减轻了服务器端的负载。</p>
<p>持久连接的特点是，只要任意一端没有明确提出断开连接，则保持 TCP 连接状态。</p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http5.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http5.png" class="lazyload"></a></p>
<h2 id="2-管道网络传输"><a class="markdownIt-Anchor" href="#2-管道网络传输"></a> <em>2. 管道网络传输</em></h2>
<p>HTTP/1.1 采用了长连接的方式，这使得管道（<code>pipeline</code>）网络传输成为了可能。</p>
<p>即可在同一个 TCP 连接里面，客户端可以发起多个请求，只要第一个请求发出去了，不必等其回来，就可以发第二个请求出去，可以 <strong>减少整体的响应时间。</strong></p>
<p>举例来说，客户端需要请求两个资源。以前的做法是，在同一个TCP连接里面，先发送 A 请求，然后等待服务器做出回应，收到后再发出 B 请求。管道机制则是允许浏览器同时发出 A 请求和 B 请求。</p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http6.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http6.png" class="lazyload"></a></p>
<p>但是服务器还是按照 <strong>顺序</strong> ，先回应 A 请求，完成后再回应 B 请求。要是 前面的回应特别慢，后面就会有许多请求排队等着。这称为「<code>队头堵塞</code>」。</p>
<h2 id="3-队头阻塞"><a class="markdownIt-Anchor" href="#3-队头阻塞"></a> <em>3. 队头阻塞</em></h2>
<p>「<code>请求 - 应答</code>」的模式加剧了 HTTP 的性能问题。</p>
<p>因为当顺序发送的请求序列中的一个请求因为某种原因被阻塞时，在后面排队的所有请求也一同被阻塞了，会招致客户端一直请求不到数据，这也就是「 <strong>队头阻塞</strong> 」。 <strong>好比上班的路上塞车</strong> 。</p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http7.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http7.png" class="lazyload"></a></p>
<p>总之 HTTP/1.1 的性能一般般，后续的 HTTP/2 和 HTTP/3 就是在优化 HTTP 的性能。</p>
<div class="note success">
            <h1 id="08-http-与-https"><a class="markdownIt-Anchor" href="#08-http-与-https"></a> 08 HTTP 与 HTTPS</h1>
          </div>
<ul>
<li>
<ol>
<li>HTTP 是超文本传输协议，信息是明文传输，存在安全风险的问题。HTTPS 则解决 HTTP 不安全的缺陷，在 TCP 和 HTTP 网络层之间加入了 SSL/TLS 安全协议，使得报文能够加密传输。</li>
</ol>
</li>
<li>
<ol start="2">
<li>HTTP 连接建立相对简单， TCP 三次握手之后便可进行 HTTP 的报文传输。而 HTTPS 在 TCP 三次握手之后，还需进行 SSL/TLS 的握手过程，才可进入加密报文传输。</li>
</ol>
</li>
<li>
<ol start="3">
<li>HTTP 的端口号是<code>80</code>，HTTPS 的端口号是 <code>443</code>。</li>
</ol>
</li>
<li>
<ol start="4">
<li>HTTPS 协议需要向 CA（证书权威机构）申请数字证书，来保证服务器的身份是可信的。</li>
</ol>
</li>
</ul>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http8.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http8.png" class="lazyload"></a></p>
<h2 id="https-vs-http"><a class="markdownIt-Anchor" href="#https-vs-http"></a> HTTPS －－VS－－ HTTP</h2>
<h3 id="http-三个风险"><a class="markdownIt-Anchor" href="#http-三个风险"></a> HTTP 三个风险：</h3>
<ul>
<li><strong>窃听风险</strong> ，比如通信链路上可以获取通信内容，用户号容易没。</li>
<li><strong>篡改风险</strong> ，比如强制入垃圾广告，视觉污染，用户眼容易瞎。</li>
<li><strong>冒充风险</strong> ，比如冒充淘宝网站，用户钱容易没。</li>
</ul>
<h3 id="https-三个优点"><a class="markdownIt-Anchor" href="#https-三个优点"></a> HTTPS　三个优点：</h3>
<ul>
<li>
<p><strong>信息加密</strong> ：交互信息无法被窃取，但你的号会因为「自身忘记」账号而没。</p>
</li>
<li>
<p><strong>校验机制</strong> ：无法篡改通信内容，篡改了就不能正常显示，但百度「竞价排名」依然可以搜索垃圾广告。</p>
</li>
<li>
<p><strong>身份证书</strong> ：证明淘宝是真的淘宝网，但你的钱还是会因为「剁手」而没。</p>
</li>
</ul>
<p>可见，只要自身不做「恶」，SSL/TLS 协议是能保证通信是安全的。</p>
<h3 id="https-解决-http"><a class="markdownIt-Anchor" href="#https-解决-http"></a> HTTPS 解决 HTTP</h3>
<h4 id="1-混合加密"><a class="markdownIt-Anchor" href="#1-混合加密"></a> <em>1. 混合加密</em></h4>
<p>通过 <strong>混合加密</strong> 的方式可以保证信息的 <strong>机密性</strong> ，解决了窃听的风险。</p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http9.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http9.png" class="lazyload"></a></p>
<p>HTTPS 采用的是 <strong>对称加密</strong> 和 <strong>非对称加密</strong> 结合的「混合加密」方式：</p>
<ul>
<li>在通信建立前采用 <strong>非对称加密</strong> 的方式交换「会话秘钥」，后续就不再使用非对称加密。</li>
<li>在通信过程中全部使用 <strong>对称加密</strong> 的「会话秘钥」的方式加密明文数据。</li>
</ul>
<p>采用「混合加密」的方式的原因：</p>
<ul>
<li><strong>对称加密</strong> 只使用一个密钥，运算速度快，密钥必须保密，无法做到安全的密钥交换。</li>
<li><strong>非对称加密</strong> 使用两个密钥：公钥和私钥，公钥可以任意分发而私钥保密，解决了密钥交换问题但速度慢。</li>
</ul>
<h4 id="2-摘要算法"><a class="markdownIt-Anchor" href="#2-摘要算法"></a> <em>2. 摘要算法</em></h4>
<p><strong>摘要算法</strong> 用来实现 <strong>完整性</strong> ，能够为数据生成独一无二的「<code>指纹</code>」，用于校验数据的完整性，解决了篡改的风险。</p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http10.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="校验完整性" class="fancybox"><img alt="校验完整性" title="校验完整性" data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http10.png" class="lazyload"></a></p>
<p>客户端在发送明文之前会通过摘要算法算出明文的「<code>指纹</code>」，发送的时候把「<code>指纹 + 明文</code>」一同加密成密文后，发送给服务器，服务器解密后，用相同的摘要算法算出发送过来的明文，通过比较客户端携带的「<code>指纹</code>」和当前算出的「<code>指纹</code>」做比较，若「<code>指纹</code>」相同，说明数据是完整的。</p>
<h3 id="3-数字证书"><a class="markdownIt-Anchor" href="#3-数字证书"></a> <em>3. 数字证书</em></h3>
<p>客户端先向服务器端索要公钥，然后用公钥加密信息，服务器收到密文后，用自己的私钥解密。</p>
<p>这就存在些问题，如何保证公钥不被篡改和信任度？</p>
<p>所以这里就需要借助第三方权威机构 CA （数字证书认证机构），将 <strong>服务器公钥放在数字证书</strong> （由数字证书认证机构颁发）中，只要证书是可信的，公钥就是可信的。</p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http11.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="数字证书工作流程" class="fancybox"><img alt="数字证书工作流程" title="数字证书工作流程" data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http11.png" class="lazyload"></a></p>
<p>通过数字证书的方式保证服务器公钥的身份，解决冒充的风险。</p>
<div class="note success">
            <h1 id="09-https-的连接交互"><a class="markdownIt-Anchor" href="#09-https-的连接交互"></a> 09 HTTPS  的连接交互</h1>
          </div>
<h2 id="ssltls-协议基本流程"><a class="markdownIt-Anchor" href="#ssltls-协议基本流程"></a> SSL/TLS 协议基本流程：</h2>
<ul>
<li>客户端向服务器索要并验证服务器的公钥。</li>
<li>双方协商生产「<code>会话秘钥</code>」。</li>
<li>双方采用「<code>会话秘钥</code>」进行加密通信。</li>
</ul>
<p>前两步也就是 SSL/TLS 的建立过程，也就是握手阶段。</p>
<p>SSL/TLS 的「握手阶段」涉及 <strong>四次</strong> 通信，可见下图：</p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http13.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="HTTPS 连接建立过程" class="fancybox"><img alt="HTTPS 连接建立过程" title="HTTPS 连接建立过程" data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http13.png" class="lazyload"></a></p>
<h2 id="ssltls-协议建立的详细流程"><a class="markdownIt-Anchor" href="#ssltls-协议建立的详细流程"></a> SSL/TLS 协议建立的详细流程：</h2>
<h3 id="1-clienthello"><a class="markdownIt-Anchor" href="#1-clienthello"></a> <em>1. ClientHello</em></h3>
<p>首先，由客户端向服务器发起加密通信请求，也就是 ClientHello 请求。</p>
<p>在这一步，客户端主要向服务器发送以下信息：</p>
<p>（1）客户端支持的 SSL/TLS 协议版本，如 TLS 1.2 版本。</p>
<p>（2）客户端生产的随机数（Client Random），后面用于生产「会话秘钥」。</p>
<p>（3）客户端支持的密码套件列表，如 RSA 加密算法。</p>
<h3 id="2-severhello"><a class="markdownIt-Anchor" href="#2-severhello"></a> <em>2. SeverHello</em></h3>
<p>服务器收到客户端请求后，向客户端发出响应，也就是 SeverHello。服务器回应的内容有如下内容：</p>
<ul>
<li>
<p>（1）确认 SSL/ TLS 协议版本，如果浏览器不支持，则关闭加密通信。</p>
</li>
<li>
<p>（2）服务器生产的随机数（Server Random），后面用于生产「会话秘钥」。</p>
</li>
<li>
<p>（3）确认的密码套件列表，如 RSA 加密算法。</p>
</li>
<li>
<p>（4）服务器的数字证书。</p>
</li>
</ul>
<h3 id="3客户端回应"><a class="markdownIt-Anchor" href="#3客户端回应"></a> <em>3.客户端回应</em></h3>
<p>客户端收到服务器的回应之后，首先通过浏览器或者操作系统中的 CA 公钥，确认服务器的数字证书的真实性。</p>
<p>如果证书没有问题，客户端会从数字证书中取出服务器的公钥，然后使用它加密报文，向服务器发送如下信息：</p>
<ul>
<li>
<p>（1）一个随机数（pre-master key）。该随机数会被服务器公钥加密。</p>
</li>
<li>
<p>（2）加密通信算法改变通知，表示随后的信息都将用「会话秘钥」加密通信。</p>
</li>
<li>
<p>（3）客户端握手结束通知，表示客户端的握手阶段已经结束。这一项同时把之前所有内容的发生的数据做个摘要，用来供服务端校验。</p>
</li>
</ul>
<p>上面第一项的随机数是整个握手阶段的第三个随机数，这样服务器和客户端就同时有三个随机数，接着就用双方协商的加密算法， <strong>各自生成</strong> 本次通信的「会话秘钥」。</p>
<h3 id="4-服务器的最后回应"><a class="markdownIt-Anchor" href="#4-服务器的最后回应"></a> <em>4. 服务器的最后回应</em></h3>
<p>服务器收到客户端的第三个随机数（pre-master key）之后，通过协商的加密算法，计算出本次通信的「会话秘钥」。然后，向客户端发生最后的信息：</p>
<ul>
<li>
<p>（1）加密通信算法改变通知，表示随后的信息都将用「会话秘钥」加密通信。</p>
</li>
<li>
<p>（2）服务器握手结束通知，表示服务器的握手阶段已经结束。这一项同时把之前所有内容的发生的数据做个摘要，用来供客户端校验。</p>
</li>
</ul>
<p>至此，整个 <code>SSL/TLS</code> 的握手阶段全部结束。接下来，客户端与服务器进入加密通信，就完全是使用普通的 HTTP 协议，只不过用「会话秘钥」<code>加密</code>内容。</p>
<div class="note success">
            <h1 id="10-http11-http2-http3-演变"><a class="markdownIt-Anchor" href="#10-http11-http2-http3-演变"></a> 10 HTTP/1.1、HTTP/2、HTTP/3 演变</h1>
          </div>
<h2 id="http11-相比-http10-性能上的改进"><a class="markdownIt-Anchor" href="#http11-相比-http10-性能上的改进"></a> HTTP/1.1 相比 HTTP/1.0 性能上的改进：</h2>
<ul>
<li>使用 <code>TCP 长连接</code>的方式改善了 HTTP/1.0 短连接造成的性能开销。</li>
<li>支持 管道（pipeline）网络传输，只要第一个请求发出去了，不必等其回来，就可以发第二个请求出去，可以减少整体的响应时间。</li>
</ul>
<p>但 HTTP/1.1 还是有<code>性能瓶颈</code>：</p>
<ul>
<li>请求 / 响应头部（Header）未经压缩就发送，首部信息越多延迟越大。只能压缩 Body 的部分；</li>
<li>发送冗长的首部。每次互相发送相同的首部造成的浪费较多；</li>
<li>服务器是按请求的顺序响应的，如果服务器响应慢，会招致客户端一直请求不到数据，也就是队头阻塞；</li>
<li>没有请求优先级控制；</li>
<li>请求只能从客户端开始，服务器只能被动响应。</li>
</ul>
<h2 id="http2-相比-http11-性能上的改进"><a class="markdownIt-Anchor" href="#http2-相比-http11-性能上的改进"></a> HTTP/2 相比 HTTP/1.1 性能上的改进</h2>
<p><code>HTTP/2</code>协议是<code>基于 HTTPS</code>的，所以 HTTP/2 的<code>安全性</code>也是有保障的。</p>
<h3 id="1-头部压缩"><a class="markdownIt-Anchor" href="#1-头部压缩"></a> <em>1. 头部压缩</em></h3>
<p><code>HTTP/2</code> 会 <strong>压缩头</strong> （Header）如果你同时发出多个请求，他们的头是一样的或是相似的，那么，协议会帮你 <strong>消除重复的分</strong> 。</p>
<p>这就是所谓的<code>HPACK</code> 算法：在客户端和服务器同时维护一张头信息表，所有字段都会存入这个表，生成一个索引号，以后就不发送同样字段了，只发送索引号，这样就 <strong>提高速度</strong> 了。</p>
<h3 id="2-二进制格式"><a class="markdownIt-Anchor" href="#2-二进制格式"></a> <em>2. 二进制格式</em></h3>
<p><code>HTTP/2</code> 不再像<code>HTTP/1.1</code>里的纯文本形式的报文，而是全面采用了 <strong>二进制格式。</strong></p>
<p>头信息和数据体都是二进制，并且统称为帧（frame）： <strong>头信息帧和数据帧</strong> 。</p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http14.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="报文区别" class="fancybox"><img alt="报文区别" title="报文区别" data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http14.png" class="lazyload"></a></p>
<p>这样虽然对人不友好，但是对计算机非常友好，因为计算机只懂二进制，那么收到报文后，无需再将明文的报文转成二进制，而是直接解析二进制报文，这 <strong>增加了数据传输的效率</strong> 。</p>
<h3 id="3-数据流"><a class="markdownIt-Anchor" href="#3-数据流"></a> <em>3. 数据流</em></h3>
<p><code>HTTP/2</code>的数据包不是按顺序发送的，同一个连接里面连续的数据包，可能属于不同的回应。因此，必须要对数据包做标记，指出它属于哪个回应。</p>
<p>每个请求或回应的所有数据包，称为一个数据流（Stream）。</p>
<p>每个数据流都标记着一个独一无二的编号，其中规定客户端发出的数据流编号为奇数， 服务器发出的数据流编号为偶数</p>
<p>客户端还可以 <strong>指定数据流的优先级</strong> 。优先级高的请求，服务器就先响应该请求。</p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http15.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="HTT/1 ~ HTTP/2" class="fancybox"><img alt="HTT/1 ~ HTTP/2" title="HTT/1 ~ HTTP/2" data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http15.png" class="lazyload"></a></p>
<h3 id="4-多路复用"><a class="markdownIt-Anchor" href="#4-多路复用"></a> <em>4. 多路复用</em></h3>
<p><code>HTTP/2</code> 是可以在 <strong>一个连接中并发多个请求或回应，而不用按照顺序一一对应</strong> 。</p>
<p>移除了 HTTP/1.1 中的串行请求，不需要排队等待，也就不会再出现「<code>队头阻塞</code>」问题， <strong>降低了延迟，大幅度提高了连接的利用率</strong> 。</p>
<p>举例来说，在一个 TCP 连接里，服务器收到了客户端 A 和 B 的两个请求，如果发现 A 处理过程非常耗时，于是就回应 A 请求已经处理好的部分，接着回应 B 请求，完成后，再回应 A 请求剩下的部分。</p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http16.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="多路复用" class="fancybox"><img alt="多路复用" title="多路复用" data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http16.png" class="lazyload"></a></p>
<h3 id="5-服务器推送"><a class="markdownIt-Anchor" href="#5-服务器推送"></a> <em>5. 服务器推送</em></h3>
<p>HTTP/2 还在一定程度上改善了传统的「<code>请求 - 应答</code>」工作模式，服务不再是被动地响应，也可以 <strong>主动</strong> 向客户端发送消息。</p>
<p>举例来说，在浏览器刚请求 HTML 的时候，就提前把可能会用到的 JS、CSS 文件等静态资源主动发给客户端， <strong>减少延时的等待</strong> ，也就是<code>服务器推送</code>（Server Push，也叫 Cache Push）。</p>
<h2 id="http3-相比-http2-性能上的改进"><a class="markdownIt-Anchor" href="#http3-相比-http2-性能上的改进"></a> HTTP/3 相比 HTTP/2 性能上的改进</h2>
<p>HTTP/2 主要的问题在于：</p>
<pre><code>    多个 HTTP 请求在复用一个 TCP 连接，下层的 TCP 协议是不知道有多少个 HTTP 请求的。
</code></pre>
<p>所以一旦发生了丢包现象，就会触发 TCP 的重传机制，这样在一个 TCP 连接中的 <strong>所有的 HTTP 请求都必须等待这个丢了的包被重传回来</strong> 。</p>
<ul>
<li>HTTP/1.1 中的管道（ pipeline）传输中如果有一个请求阻塞了，那么队列后请求也统统被阻塞住了.</li>
<li>HTTP/2 多请求复用一个TCP连接，一旦发生丢包，就会阻塞住所有的 HTTP 请求。</li>
</ul>
<p>这都是基于 TCP 传输层的问题，所以  <strong>HTTP/3 把 HTTP 下层的 TCP 协议改成了 UDP！</strong></p>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http17.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="HTTP/1 ~ HTTP/3" class="fancybox"><img alt="HTTP/1 ~ HTTP/3" title="HTTP/1 ~ HTTP/3" data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http17.png" class="lazyload"></a></p>
<p>UDP 发生是不管顺序，也不管丢包的，所以不会出现 HTTP/1.1 的<code>队头阻塞</code> 和 HTTP/2 的一个<code>丢包全部重传</code>问题。</p>
<p>大家都知道 UDP 是不可靠传输的，但基于 UDP 的  <strong>QUIC 协议</strong>  可以实现类似 TCP 的可靠性传输。</p>
<ul>
<li>
<p>QUIC 有自己的一套机制可以保证传输的可靠性的。当某个流发生丢包时，只会阻塞这个流， <strong>其他流不会受到影响</strong> 。</p>
</li>
<li>
<p>TL3 升级成了最新的 3 版本，头部压缩算法也升级成了 QPack。</p>
</li>
<li>
<p>HTTPS 要建立一个连接，要花费 6 次交互，先是建立三次握手，然后是 TLS/1.3 的三次握手。QUIC 直接把以往的 TCP 和 TLS/1.3 的 6 次交互 <strong>合并成了 3 次，减少了交互次数</strong> 。</p>
</li>
</ul>
<p><a href="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http18.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="TCP HTTPS（TLS/1.3） 和 QUIC HTTPS" class="fancybox"><img alt="TCP HTTPS（TLS/1.3） 和 QUIC HTTPS" title="TCP HTTPS（TLS/1.3） 和 QUIC HTTPS" data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/http18.png" class="lazyload"></a><br>
所以， QUIC 是一个在 UDP 之上的 <strong>伪</strong>  TCP + TLS + HTTP/2 的多路复用的协议。</p>
<p>QUIC 是新协议，对于很多网络设备，根本不知道什么是 QUIC，只会当做 UDP，这样会出现新的问题。所以 <code>HTTP/3</code> 现在普及的进度非常的缓慢，不知道未来 UDP 是否能够逆袭 TCP。</p>
<hr>
<h2 id="参考文献"><a class="markdownIt-Anchor" href="#参考文献"></a> <strong>参考文献:</strong></h2>
<p>[1] 上野 宣.图解HTTP.人民邮电出版社.</p>
<p>[2] 罗剑锋.透视HTTP协议.极客时间.</p>
<p>[3] <a href="https://coolshell.cn/articles/19840.html" target="_blank" rel="noopener">陈皓.HTTP的前世今.酷壳CoolShell.</a></p>
<p>[4] <a href="http://www.ruanyifeng.com/blog/2016/08/http.html" target="_blank" rel="noopener">阮一峰.HTTP 协议入门.阮一峰的网络日志.</a></p>
<hr>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络    </a><a class="post-meta__tags" href="/tags/Http/">Http    </a></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/http_sth/cover.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 赏饭钱<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.png" alt="wechat"><div class="post-qr-code__desc">wechat</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/aliplay.png" alt="alipay"><div class="post-qr-code__desc">alipay</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/03/11/%E2%96%B6%E5%89%8D%E7%AB%AF/CSS/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/CCS%E8%83%8C%E6%99%AF%E5%AE%9A%E4%BD%8D%E4%B8%8E%E5%85%B3%E8%81%94/"><img class="prev_cover lazyload" data-src="https://gitee.com/chuyuxuan/tuc/raw/master/CSS/1.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>CSS背景定位与背景关联</span></div></a></div><div class="next-post pull_right"><a href="/2020/03/05/%E2%96%B6%E5%B0%8F%E6%8A%80%E8%83%BD/%E7%94%B5%E8%84%91%E5%B0%8F%E6%8A%80%E5%B7%A7/window%E4%B8%8B%E5%BF%AB%E9%80%9F%E5%91%BD%E5%90%8D/"><img class="next_cover lazyload" data-src="https://gitee.com/chuyuxuan/tuc/raw/master/Computer_Graphics/logos.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>Window下照片快速批量命名</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/02/08/▶计算机网络/其他/计算机网络英语词汇缩写信息表/" title="计算机网络英语词汇缩写信息表"><img class="relatedPosts_cover lazyload"data-src="https://gitee.com/chuyuxuan/tuc/raw/master/computer_network/cover.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-08</div><div class="relatedPosts_title">计算机网络英语词汇缩写信息表</div></div></a></div><div class="relatedPosts_item"><a href="/2020/02/04/▶计算机网络/运输层/6分钟让你明白距离向量算法/" title="6分钟让你明白距离向量路由算法"><img class="relatedPosts_cover lazyload"data-src="https://gitee.com/chuyuxuan/images_bed/raw/master/w_%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-04</div><div class="relatedPosts_title">6分钟让你明白距离向量路由算法</div></div></a></div><div class="relatedPosts_item"><a href="/2020/02/04/▶计算机网络/网络层/2分钟让你了解子网分组转发/" title="2分钟让你了解子网分组转发"><img class="relatedPosts_cover lazyload"data-src="https://gitee.com/chuyuxuan/images_bed/raw/master/w_%E5%AD%90%E7%BD%91%E5%88%86%E7%BB%84%E8%BD%AC%E5%8F%91.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-04</div><div class="relatedPosts_title">2分钟让你了解子网分组转发</div></div></a></div><div class="relatedPosts_item"><a href="/2020/02/04/▶计算机网络/数据链路层/5分钟让你明白CRC循环冗余校验/" title="5分钟让你明白CRC循环冗余校验"><img class="relatedPosts_cover lazyload"data-src="https://gitee.com/chuyuxuan/images_bed/raw/master/w_CRC.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-04</div><div class="relatedPosts_title">5分钟让你明白CRC循环冗余校验</div></div></a></div><div class="relatedPosts_item"><a href="/2020/02/04/▶计算机网络/物理层/8分钟让你了解CDMA码分多址/" title="8分钟让你了解CDMA码分多址"><img class="relatedPosts_cover lazyload"data-src="https://gitee.com/chuyuxuan/images_bed/raw/master/w_CDMA.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-04</div><div class="relatedPosts_title">8分钟让你了解CDMA码分多址</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = true == true ? true : false;
var verify = false == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'4VHYBgLfdjw6zhs1Ep46acMw-gzGzoHsz',
  appKey:'t4eW4wzuDJuIU1McV0Ir9Dzq',
  placeholder:'输入邮箱可以得到精准回复😛~',
  avatar:'monsterid',
  guest_info:guest_info,
  pageSize:'8',
  lang:'zh-cn',
  recordIP: true
});</script></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By Chuyuxuan</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a href="http://www.beian.miit.gov.cn/" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"><span>湘ICP备20007944号</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>